webpackJsonp([0,4],{0:function(e,t,a){a(1),e.exports=a(300)},296:function(e,t){},300:function(e,t,a){(function(e){"use strict";function t(e){return e&&e.__esModule?e:{default:e}}function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var o=function(){function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}(),l=a(302),s=t(l),c=a(332),u=t(c),d=a(470),m=a(510),p=t(m),f=a(516),h=t(f),v=a(517),b=t(v),g=a(519),y=t(g),E=a(520),N=t(E),w=a(521),k=t(w),_=a(522),O=t(_),x=a(525),S=t(x),j=a(541),A=t(j),P=a(542),M=t(P),C=a(543),R=t(C);a(544),a(515);var U=function(t){function a(e){return n(this,a),r(this,(a.__proto__||Object.getPrototypeOf(a)).call(this,e))}return i(a,t),o(a,[{key:"componentDidMount",value:function(){e(".ui.sidebar.chat").sidebar("setting","transition","overlay")}},{key:"render",value:function(){return s.default.createElement(d.BrowserRouter,{basename:"/app"},s.default.createElement("div",{id:"app"},s.default.createElement(p.default,null),s.default.createElement(d.Route,{exact:!0,path:"/",component:b.default}),s.default.createElement(d.Route,{path:"/hot",component:y.default}),s.default.createElement(d.Route,{path:"/original",component:k.default}),s.default.createElement(d.Route,{path:"/recommend",component:N.default}),s.default.createElement(d.Route,{path:"/community",component:O.default}),s.default.createElement(d.Route,{path:"/personal",component:S.default}),s.default.createElement(d.Route,{path:"/sheet/:sheetId",component:A.default}),s.default.createElement(d.Route,{path:"/user/:userId",component:R.default}),s.default.createElement(h.default,null),s.default.createElement(M.default,null)))}}]),a}(s.default.Component);u.default.render(s.default.createElement(U,null),e("#react-root")[0])}).call(t,a(301))},510:function(e,t,a){(function(e,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function l(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var s=function(){function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}(),c=a(302),u=r(c),d=a(512),m=r(d),p=a(470),f=a(513),h=r(f),v=a(514);a(515);var b=function(t){function a(e){i(this,a);var t=o(this,(a.__proto__||Object.getPrototypeOf(a)).call(this,e));return t.state={avatar:"/image/avatar.png",userId:-1},t.loadUserProfile=t.loadUserProfile.bind(t),t.loadUserAvatar=t.loadUserAvatar.bind(t),t.logOut=t.logOut.bind(t),t}return l(a,t),s(a,[{key:"componentDidMount",value:function(){var t=this;e(".ui .dropdown").dropdown({action:"hide"}),this.loadUserProfile(),setInterval(function(){t.loadUserProfile()},5e3)}},{key:"loadUserProfile",value:function(){var t=this,a=e("#token").val();n("/api/user/profile/get",{method:"GET",credentials:"same-origin",headers:{Authorization:a}}).then(t.checkStatus).then(t.parseJSON).then(function(e){t.setState({avatar:""===e.body.avatar?"/image/avatar.png":(0,v.getURL)(e.body.avatar),userId:e.body.id})}).catch(function(e){console.error(e)})}},{key:"loadUserAvatar",value:function(e){var t=this;""!=e&&t.setState({avatar:(0,v.getURL)(e)})}},{key:"logOut",value:function(){var e=this;n("/api/user/account/logout",{method:"POST",credentials:"same-origin",headers:{"Content-Type":"application/json"}}).then(e.checkStatus).then(e.parseJSON).then(function(e){window.location.href="/"}).catch(function(e){console.log(e)})}},{key:"render",value:function(){var e=null;return e=this.state.userId==-1?u.default.createElement("div",{className:"item"},"个人主页"):u.default.createElement(p.Link,{to:"/user/"+this.state.userId,className:"item"},"个人主页"),u.default.createElement("div",{className:"header-top"},u.default.createElement("div",{className:"ui grid container"},u.default.createElement("div",{className:"six wide column"},u.default.createElement("div",{className:"ui segment"},u.default.createElement("div",{className:"ui secondary menu"},u.default.createElement("div",{className:"icon-home item"},u.default.createElement(p.Link,{to:"/"},u.default.createElement("i",{className:"home icon big link"})))))),u.default.createElement("div",{className:"four wide column"},u.default.createElement("div",{className:"ui center aligned segment"},u.default.createElement("div",{className:"ui secondary menu"},u.default.createElement("div",{className:"item logo"},u.default.createElement("div",{className:"image"},u.default.createElement("img",{src:h.default})))))),u.default.createElement("div",{className:"six wide column"},u.default.createElement("div",{className:"ui segment"},u.default.createElement("div",{className:"ui secondary menu"},u.default.createElement("div",{className:"right menu"},u.default.createElement("div",{className:"item"},u.default.createElement("div",{className:"ui icon input"},u.default.createElement("input",{type:"text",placeholder:"Search..."}),u.default.createElement("i",{className:"search link icon"}))),u.default.createElement("div",{className:"icon-user item"},u.default.createElement("div",{className:"ui floating top right pointing dropdown"},u.default.createElement("img",{className:"ui avatar image",src:this.state.avatar}),u.default.createElement("i",{className:"dropdown icon"}),u.default.createElement("div",{className:"menu"},e,u.default.createElement(p.Link,{to:"/personal/profile",className:"item"},"个人中心"),u.default.createElement("div",{className:"divider"}),u.default.createElement("div",{className:"item"},"设置"),u.default.createElement("div",{className:"item",onClick:this.logOut},"注销"))))))))))}}]),a}(m.default),g=function(e){function t(){return i(this,t),o(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return l(t,e),s(t,[{key:"render",value:function(){return u.default.createElement("div",{className:"ui divider"})}}]),t}(u.default.Component),y=function(e){function t(){return i(this,t),o(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return l(t,e),s(t,[{key:"render",value:function(){return u.default.createElement("div",{className:"navigation"},u.default.createElement("div",{className:"ui container"},u.default.createElement("div",{className:"ui four item menu"},u.default.createElement(p.NavLink,{to:"/hot",activeClassName:"active",className:"item"},"本周热门"),u.default.createElement(p.NavLink,{to:"/recommend",activeClassName:"active",className:"item"},"木屑推荐"),u.default.createElement(p.NavLink,{to:"/original",activeClassName:"active",className:"item"},"最新原创"),u.default.createElement("a",{className:"item"},"音乐社区"))))}}]),t}(u.default.Component),E=function(e){function t(){return i(this,t),o(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return l(t,e),s(t,[{key:"render",value:function(){return u.default.createElement("div",{className:"header"},u.default.createElement(b,null),u.default.createElement(g,null),u.default.createElement(y,null))}}]),t}(u.default.Component);t.default=E}).call(t,a(301),a(511))},512:function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var l=function(){function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}(),s=a(302),c=n(s),u=function(e){function t(e){r(this,t);var a=i(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return a.checkStatus=a.checkStatus.bind(a),a.parseJSON=a.parseJSON.bind(a),a}return o(t,e),l(t,[{key:"checkStatus",value:function(e){if(e.status>=200&&e.status<300)return e;var t=new Error(e.statusText);throw t.response=e,t}},{key:"parseJSON",value:function(e){return e.json()}}]),t}(c.default.Component);t.default=u},513:function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAIgAAAAZCAMAAADdXpaGAAAABGdBTUEAALGPC/xhBQAAAAFzUkdCAK7OHOkAAABsUExURUdwTCkeGiMZFiUdGSMZFiUbGDYpKSwjHyMZFiQaFiMZFiMZFiMZFiMZFiMZFiMZFiQaGCMaFyMZFiMZFiMZFiQaFyMZFiMZFiMaFv///yMZFiMZFiMZFv7+/pSPjVNLSeLh4TwzMG5nZcTBwDMKUrwAAAAcdFJOUwAVwR75KwYO3kOl73y3iMw5Xq+TTVXo1XEBZ51oWI6CAAAD3UlEQVRIx61X63qbMAwFbDA3c7+jtN32/u84yZKJ02771qb+k0Ascc7RkUyiKFyZiWOTRd+wmrz7aqjabAVu5WfxNJAEpi/F7VMC4Vrn/TkgOXyJTNHC+5Wop4BoSD8fFJf05OU8pqLoGy9N9YwmMUD8+SiSwxbXc+Mtd055RpAU9JdkzB8Lmh1o2/IZINNfeMzpP9F/rGcBUIfICoe0bzqWrGYDmZlbQ83Sq119Nu7WAUm40f009qaAkdN1dGOiQbEXzVlzGec/yHjAg+tTImjQPZoyLFi3jOEy74bz76czF32vSVDauPBUMs6G1cr0OmijHpPhb8q1yWIiF9R+ADI+mo2emCWASJoorTQGOwl6WN3PJQM5YJm73hKD89ro+OwD5MfUILCeqbepXkoMUgsMc1/x7RJsY8/53TyqyqG5dO0Ra4lsEjjjXBcGeFzVrgC0u+aPwwdY2OLFbZw5PifOpmJcG1hbKd537m43XaygSZ7QExHP2MUjqWE4iPUAzaCnaBdFTjhlevXBB+ecE11QHxR86YBn4sYGFr7RQYUAM55+mea5oYNaKJkl51Upq5OMGr0lwDglVKCEf1wJa3YRGUgew0/uxCrYFoY3SuYRK0h8EvmV1/HQNK9vt5drqA2oTsxC2Z0S61CJWIimGgbejwBc+2PujAWVtFpKye50SqkE1liaBi63y9oAXm632w9Q18ibOL/D00u3aO9ZJoqphCkCcKaYYWEejVQ4FwJMGotRjBpKI71XPdaBtSMgr37ALDzeUvGemFRxhVQF1Z1ALYqKK9ughKiYi9ullJRAQ+vnxIDOeQ8EFfiFQH4KkEzMOTFBb1KuELa1dLGD6Hb6vh6ZQOu6wqwyrn0piZhlGMbpJIo090GKxXpzisRRQN0T9Ay5Qica2F6hg7OD72vLSd3+fdArX3rP3hHFeU1sZU3h0Ifb7e2nPzA69hwSHEKTukmIU7UMxJwdVlECzXhwpQe6t7EyKGx1nXIuEc7s/t40NguywY+XVyzg5I+wReiOEj+RmDWaf4QWa9Pg5dSmFwTvTo2eMqSkThsEQxPU0ARer7lHDdOtlLfnpln74PWjcfd0mQaDVealNOew5jsdSBVlwumSaIUGT8bEnUZ+I6ptW+SgNJnSuMvcDdbokrqyKzcsTbl87B7egixonWz3AddLpOWmiejUO/bI4HvLELseqxoT1eS1fAo34oZ84zPUxlfcdi/lRDHtzDFWfXzhlNb25lUMKlZcvrhgrQx/mqLj+6qQVO83RnG63y+NumfPUh+TPx4yIv0cfe/6j78o5g//Y8z3/Lf51PoN6rBa5hoOjIUAAAAASUVORK5CYII="},514:function(e,t,a){(function(e,a){"use strict";function n(e){if(e.status>=200&&e.status<300)return e;var t=new Error(e.statusText);throw t.response=e,t}function r(e){return e.json()}function i(){var e=new Date(s.expiration).getTime(),t=(new Date).getTime();return e<=t}function o(t){return null===s.client||i()?e("/api/oss/sts/get",{method:"GET",credentials:"same-origin",headers:{Authorization:t}}).then(n).then(r).then(function(e){return console.log(e),s.expiration=e.body.expiration,s.client=new OSS.Wrapper({region:"oss-ap-northeast-1",accessKeyId:e.body.accessKeyId,accessKeySecret:e.body.accessKeySecret,stsToken:e.body.securityToken,bucket:"mushare-jp"}),s.client}):new a(function(e,t){e(s.client)})}function l(e){return"http://mushare-jp.oss-ap-northeast-1.aliyuncs.com/"+e}Object.defineProperty(t,"__esModule",{value:!0});var s={client:null,expiration:""};t.getOssClient=o,t.getURL=l}).call(t,a(511),a(294))},516:function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var l=function(){function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}(),s=a(302),c=n(s),u=a(332),d=(n(u),function(e){function t(){return r(this,t),i(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return o(t,e),l(t,[{key:"render",value:function(){return c.default.createElement("div",{className:"ui inverted vertical footer segment"},c.default.createElement("div",{className:"ui container"},c.default.createElement("div",{className:"ui stackable inverted divided equal height stackable grid"},c.default.createElement("div",{className:"three wide column"},c.default.createElement("h4",{className:"ui inverted header"},"关于"),c.default.createElement("div",{className:"ui inverted link list"},c.default.createElement("a",{href:"#",className:"item"},"MuShare Group"),c.default.createElement("a",{href:"#",className:"item"},"App 下载"),c.default.createElement("a",{href:"#",className:"item"},"关于我们"))),c.default.createElement("div",{className:"three wide column"},c.default.createElement("h4",{className:"ui inverted header"},"服务"),c.default.createElement("div",{className:"ui inverted link list"},c.default.createElement("a",{href:"#",className:"item"},"音乐咨询"),c.default.createElement("a",{href:"#",className:"item"},"联系合作"),c.default.createElement("a",{href:"#",className:"item"},"常用链接"))),c.default.createElement("div",{className:"three wide column"},c.default.createElement("h4",{className:"ui inverted header"},"版权所有"),c.default.createElement("p",null,"©2017 MuShare Group")))))}}]),t}(c.default.Component));t.default=d},517:function(e,t,a){(function(e,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function l(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var s=function(){function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}(),c=a(302),u=r(c),d=a(512),m=r(d),p=a(470),f=a(332),h=(r(f),a(514));a(518);var v=function(t){function a(e){i(this,a);var t=o(this,(a.__proto__||Object.getPrototypeOf(a)).call(this,e));return t.state={sheets:[]},t.loadHot=t.loadHot.bind(t),t}return l(a,t),s(a,[{key:"loadHot",value:function(){var t=this;e("/api/admin/hot/get",{method:"GET",credentials:"same-origin"}).then(t.checkStatus).then(t.parseJSON).then(function(e){var a=e.body.map(function(e){return{id:e.id,cover:e.cover,name:e.name}});t.setState({sheets:a})}).catch(function(e){console.log(e)})}},{key:"componentDidMount",value:function(){this.loadHot()}},{key:"render",value:function(){var e=this.state.sheets.map(function(e){return u.default.createElement(p.Link,{to:"/sheet/"+e.id,className:"card","data-id":e.id},u.default.createElement("div",{className:"image"},u.default.createElement("img",{src:""===e.cover?"/image/avatar.png":(0,h.getURL)(e.cover)})),u.default.createElement("div",{className:"content"},u.default.createElement("div",{className:"description"},e.name)))});return u.default.createElement("div",{className:"ui four link cards"},e)}}]),a}(m.default),b=function(t){function a(e){i(this,a);var t=o(this,(a.__proto__||Object.getPrototypeOf(a)).call(this,e));return t.state={sheets:[]},t.loadRecommend=t.loadRecommend.bind(t),t}return l(a,t),s(a,[{key:"loadRecommend",value:function(){var t=this;e("/api/admin/recommend/get",{method:"GET",credentials:"same-origin"}).then(t.checkStatus).then(t.parseJSON).then(function(e){var a=e.body.map(function(e){return{id:e.id,cover:e.cover,name:e.name}});t.setState({sheets:a})}).catch(function(e){console.log(e)})}},{key:"componentDidMount",value:function(){this.loadRecommend()}},{key:"render",value:function(){var e=this.state.sheets.map(function(e){return u.default.createElement(p.Link,{to:"/sheet/"+e.id,className:"card","data-id":e.id},u.default.createElement("div",{className:"image"},u.default.createElement("img",{src:""===e.cover?"/image/avatar.png":(0,h.getURL)(e.cover)})),u.default.createElement("div",{className:"content"},u.default.createElement("div",{className:"description"},e.name)))});return u.default.createElement("div",{className:"ui four link cards"},e)}}]),a}(m.default),g=function(t){function a(e){i(this,a);var t=o(this,(a.__proto__||Object.getPrototypeOf(a)).call(this,e));return t.state={sheets:[]},t.loadOriginal=t.loadOriginal.bind(t),t}return l(a,t),s(a,[{key:"loadOriginal",value:function(){var t=this;e("/api/admin/original/get",{method:"GET",credentials:"same-origin"}).then(t.checkStatus).then(t.parseJSON).then(function(e){var a=e.body.map(function(e){return{id:e.id,cover:e.cover,name:e.name}});t.setState({sheets:a})}).catch(function(e){console.log(e)})}},{key:"componentDidMount",value:function(){this.loadOriginal()}},{key:"render",value:function(){var e=this.state.sheets.map(function(e){return u.default.createElement(p.Link,{to:"/sheet/"+e.id,className:"card","data-id":e.id},u.default.createElement("div",{className:"image"},u.default.createElement("img",{src:""===e.cover?"/image/avatar.png":(0,h.getURL)(e.cover)})),u.default.createElement("div",{className:"content"},u.default.createElement("div",{className:"description"},e.name)))});return u.default.createElement("div",{className:"ui four link cards"},e)}}]),a}(m.default),y=function(e){function t(e){return i(this,t),o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e))}return l(t,e),s(t,[{key:"componentDidMount",value:function(){n(".roundabout_box ul").roundabout({duration:1e3,minScale:.6,autoplay:!0,autoplayDuration:5e3,minOpacity:0,maxOpacity:1,reflect:!0,startingChild:3,autoplayInitialDelay:5e3,autoplayPauseOnHover:!0,enableDrag:!0})}},{key:"render",value:function(){return u.default.createElement("div",{className:"home"},u.default.createElement("div",{className:"carousel exhibition_hall"},u.default.createElement("div",{className:"ui container roundabout_box"},u.default.createElement("ul",null,u.default.createElement("li",null,u.default.createElement("img",{src:"/image/bg1.jpg",alt:""})),u.default.createElement("li",null,u.default.createElement("img",{src:"/image/bg2.jpg",alt:""})),u.default.createElement("li",null,u.default.createElement("img",{src:"/image/bg3.jpg",alt:""})),u.default.createElement("li",null,u.default.createElement("img",{src:"/image/bg4.jpg",alt:""})))),u.default.createElement("div",{className:"clear"})),u.default.createElement("div",{className:"ui container hot"},u.default.createElement("div",{className:"ui medium header"},"本周热门"),u.default.createElement(v,null)),u.default.createElement("div",{className:"ui container recommend"},u.default.createElement("div",{className:"ui medium header"},"木屑推荐"),u.default.createElement(b,null)),u.default.createElement("div",{className:"ui container original"},u.default.createElement("div",{className:"ui medium header"},"最新原创"),u.default.createElement(g,null)))}}]),t}(u.default.Component);t.default=y}).call(t,a(511),a(301))},519:function(e,t,a){(function(e){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var l=function(){function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}(),s=a(302),c=n(s),u=a(332),d=(n(u),a(512)),m=n(d),p=a(470),f=a(514),h=function(t){function a(e){r(this,a);var t=i(this,(a.__proto__||Object.getPrototypeOf(a)).call(this,e));return t.state={sheets:[]},t.loadHot=t.loadHot.bind(t),t}return o(a,t),l(a,[{key:"loadHot",value:function(){var t=this;e("/api/admin/hot/get",{method:"GET",credentials:"same-origin"}).then(t.checkStatus).then(t.parseJSON).then(function(e){var a=e.body.map(function(e){return{id:e.id,cover:e.cover,name:e.name}});t.setState({sheets:a})}).catch(function(e){console.log(e)})}},{key:"componentDidMount",value:function(){this.loadHot()}},{key:"render",value:function(){var e=this.state.sheets.map(function(e){return c.default.createElement(p.Link,{to:"/sheet/"+e.id,className:"card","data-id":e.id},c.default.createElement("div",{className:"image"},c.default.createElement("img",{src:""===e.cover?"/image/avatar.png":(0,f.getURL)(e.cover)})),c.default.createElement("div",{className:"content"},c.default.createElement("div",{className:"description"},e.name)))});return c.default.createElement("div",{className:"hot"},c.default.createElement("div",{className:"ui container"},c.default.createElement("div",{className:"ui medium header"},"本周热门"),c.default.createElement("div",{className:"ui four link cards"},e)))}}]),a}(m.default);t.default=h}).call(t,a(511))},520:function(e,t,a){(function(e){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var l=function(){function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}(),s=a(302),c=n(s),u=a(512),d=n(u),m=a(470),p=a(514),f=function(t){function a(e){r(this,a);var t=i(this,(a.__proto__||Object.getPrototypeOf(a)).call(this,e));return t.state={sheets:[]},t.loadRecommend=t.loadRecommend.bind(t),t}return o(a,t),l(a,[{key:"loadRecommend",value:function(){var t=this;e("/api/admin/recommend/get",{method:"GET",credentials:"same-origin"}).then(t.checkStatus).then(t.parseJSON).then(function(e){var a=e.body.map(function(e){return{id:e.id,cover:e.cover,name:e.name}});t.setState({sheets:a})}).catch(function(e){console.log(e)})}},{key:"componentDidMount",value:function(){this.loadRecommend()}},{key:"render",value:function(){var e=this.state.sheets.map(function(e){return c.default.createElement(m.Link,{to:"/sheet/"+e.id,className:"card","data-id":e.id},c.default.createElement("div",{className:"image"},c.default.createElement("img",{src:""===e.cover?"/image/avatar.png":(0,p.getURL)(e.cover)})),c.default.createElement("div",{className:"content"},c.default.createElement("div",{className:"description"},e.name)))});return c.default.createElement("div",{className:"recommend"},c.default.createElement("div",{className:"ui container"},c.default.createElement("div",{className:"ui medium header"},"木屑推荐"),c.default.createElement("div",{className:"ui four link cards"},e)))}}]),a}(d.default);t.default=f}).call(t,a(511))},521:function(e,t,a){(function(e){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var l=function(){function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}(),s=a(302),c=n(s),u=a(512),d=n(u),m=a(470),p=a(514),f=function(t){function a(e){r(this,a);var t=i(this,(a.__proto__||Object.getPrototypeOf(a)).call(this,e));return t.state={sheets:[]},t.loadOriginal=t.loadOriginal.bind(t),t}return o(a,t),l(a,[{key:"loadOriginal",value:function(){var t=this;e("/api/admin/original/get",{method:"GET",credentials:"same-origin"}).then(t.checkStatus).then(t.parseJSON).then(function(e){var a=e.body.map(function(e){return{id:e.id,cover:e.cover,name:e.name}});t.setState({sheets:a})}).catch(function(e){console.log(e)})}},{key:"componentDidMount",value:function(){this.loadOriginal()}},{key:"render",value:function(){var e=this.state.sheets.map(function(e){return c.default.createElement(m.Link,{to:"/sheet/"+e.id,className:"card","data-id":e.id},c.default.createElement("div",{className:"image"},c.default.createElement("img",{src:""===e.cover?"/image/avatar.png":(0,p.getURL)(e.cover)})),c.default.createElement("div",{className:"content"},c.default.createElement("div",{className:"description"},e.name)))});return c.default.createElement("div",{className:"original"},c.default.createElement("div",{className:"ui container"},c.default.createElement("div",{className:"ui medium header"},"最新原创"),c.default.createElement("div",{className:"ui four link cards"},e)))}}]),a}(d.default);t.default=f}).call(t,a(511))},522:function(e,t,a){(function(e){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var l=function(){function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}(),s=a(302),c=n(s),u=a(523),d=n(u),m=a(524),p=n(m);a(515);var f=function(t){function a(e){return r(this,a),i(this,(a.__proto__||Object.getPrototypeOf(a)).call(this,e))}return o(a,t),l(a,[{key:"componentDidMount",value:function(){e(".community .menu .item").tab()}},{key:"render",value:function(){return c.default.createElement("div",{className:"community"},c.default.createElement("div",{className:"ui container"},c.default.createElement("div",{className:"ui top attached tabular menu"},c.default.createElement("a",{className:"item active","data-tab":"moments"},"动态"),c.default.createElement("a",{className:"item","data-tab":"articles"},"文章")),c.default.createElement("div",{className:"ui bottom active attached tab segment","data-tab":"moments"},c.default.createElement(d.default,null)),c.default.createElement("div",{className:"ui bottom attached tab segment","data-tab":"articles"},c.default.createElement(p.default,null))))}}]),a}(c.default.Component);t.default=f}).call(t,a(301))},523:function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var l=function(){function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}(),s=a(302),c=n(s),u=function(e){function t(e){return r(this,t),i(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e))}return o(t,e),l(t,[{key:"render",value:function(){return c.default.createElement("div",{className:"ui feed"},c.default.createElement("div",{className:"event"},c.default.createElement("div",{className:"label"},c.default.createElement("img",{src:"/image/avatar.png"})),c.default.createElement("div",{className:"content"},c.default.createElement("div",{className:"summary"},c.default.createElement("a",{className:"user"},"Elliot Fu")," added you as a friend",c.default.createElement("div",{className:"date"},"1 Hour Ago")),c.default.createElement("div",{className:"meta"},c.default.createElement("a",{className:"like"},c.default.createElement("i",{className:"like icon"})," 4 Likes")))),c.default.createElement("div",{className:"event"},c.default.createElement("div",{className:"label"},c.default.createElement("img",{src:"/image/avatar.png"})),c.default.createElement("div",{className:"content"},c.default.createElement("div",{className:"summary"},c.default.createElement("a",null,"Helen Troy")," added ",c.default.createElement("a",null,"2 new illustrations"),c.default.createElement("div",{className:"date"},"4 days ago")),c.default.createElement("div",{className:"extra images"},c.default.createElement("a",null,c.default.createElement("img",{src:"/image/avatar.png"})),c.default.createElement("a",null,c.default.createElement("img",{src:"/image/avatar.png"}))),c.default.createElement("div",{className:"meta"},c.default.createElement("a",{className:"like"},c.default.createElement("i",{className:"like icon"})," 1 Like")))),c.default.createElement("div",{
className:"event"},c.default.createElement("div",{className:"label"},c.default.createElement("img",{src:"/image/avatar.png"})),c.default.createElement("div",{className:"content"},c.default.createElement("div",{className:"summary"},c.default.createElement("a",{className:"user"},"Jenny Hess")," added you as a friend",c.default.createElement("div",{className:"date"},"2 Days Ago")),c.default.createElement("div",{className:"meta"},c.default.createElement("a",{className:"like"},c.default.createElement("i",{className:"like icon"})," 8 Likes")))),c.default.createElement("div",{className:"event"},c.default.createElement("div",{className:"label"},c.default.createElement("img",{src:"/image/avatar.png"})),c.default.createElement("div",{className:"content"},c.default.createElement("div",{className:"summary"},c.default.createElement("a",null,"Joe Henderson")," posted on his page",c.default.createElement("div",{className:"date"},"3 days ago")),c.default.createElement("div",{className:"extra text"},"Ours is a life of constant reruns. We're always circling back to where we'd we started, then starting all over again. Even if we don't run extra laps that day, we surely will come back for more of the same another day soon."),c.default.createElement("div",{className:"meta"},c.default.createElement("a",{className:"like"},c.default.createElement("i",{className:"like icon"})," 5 Likes")))),c.default.createElement("div",{className:"event"},c.default.createElement("div",{className:"label"},c.default.createElement("img",{src:"/image/avatar.png"})),c.default.createElement("div",{className:"content"},c.default.createElement("div",{className:"summary"},c.default.createElement("a",null,"Justen Kitsune")," added ",c.default.createElement("a",null,"2 new photos")," of you",c.default.createElement("div",{className:"date"},"4 days ago")),c.default.createElement("div",{className:"extra images"},c.default.createElement("a",null,c.default.createElement("img",{src:"/image/avatar.png"})),c.default.createElement("a",null,c.default.createElement("img",{src:"/image/avatar.png"}))),c.default.createElement("div",{className:"meta"},c.default.createElement("a",{className:"like"},c.default.createElement("i",{className:"like icon"})," 41 Likes")))))}}]),t}(c.default.Component);t.default=u},524:function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var l=function(){function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}(),s=a(302),c=n(s),u=function(e){function t(e){return r(this,t),i(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e))}return o(t,e),l(t,[{key:"render",value:function(){return c.default.createElement("div",{className:"ui feed"},c.default.createElement("div",{className:"ui tall stacked segment"},c.default.createElement("p",null,"Pellentesque habitant morbi tristique senectus et netus et malesuada fames ac turpis egestas. Vestibulum tortor quam, feugiat vitae, ultricies eget, tempor sit amet, ante. Donec eu libero sit amet quam egestas semper. Aenean ultricies mi vitae est. Mauris placerat eleifend leo.")),c.default.createElement("div",{className:"ui tall stacked segment"},c.default.createElement("p",null,"Pellentesque habitant morbi tristique senectus et netus et malesuada fames ac turpis egestas. Vestibulum tortor quam, feugiat vitae, ultricies eget, tempor sit amet, ante. Donec eu libero sit amet quam egestas semper. Aenean ultricies mi vitae est. Mauris placerat eleifend leo.")),c.default.createElement("div",{className:"ui tall stacked segment"},c.default.createElement("p",null,"Pellentesque habitant morbi tristique senectus et netus et malesuada fames ac turpis egestas. Vestibulum tortor quam, feugiat vitae, ultricies eget, tempor sit amet, ante. Donec eu libero sit amet quam egestas semper. Aenean ultricies mi vitae est. Mauris placerat eleifend leo.")),c.default.createElement("div",{className:"ui tall stacked segment"},c.default.createElement("p",null,"Pellentesque habitant morbi tristique senectus et netus et malesuada fames ac turpis egestas. Vestibulum tortor quam, feugiat vitae, ultricies eget, tempor sit amet, ante. Donec eu libero sit amet quam egestas semper. Aenean ultricies mi vitae est. Mauris placerat eleifend leo.")),c.default.createElement("div",{className:"ui tall stacked segment"},c.default.createElement("p",null,"Pellentesque habitant morbi tristique senectus et netus et malesuada fames ac turpis egestas. Vestibulum tortor quam, feugiat vitae, ultricies eget, tempor sit amet, ante. Donec eu libero sit amet quam egestas semper. Aenean ultricies mi vitae est. Mauris placerat eleifend leo.")),c.default.createElement("div",{className:"ui tall stacked segment"},c.default.createElement("p",null,"Pellentesque habitant morbi tristique senectus et netus et malesuada fames ac turpis egestas. Vestibulum tortor quam, feugiat vitae, ultricies eget, tempor sit amet, ante. Donec eu libero sit amet quam egestas semper. Aenean ultricies mi vitae est. Mauris placerat eleifend leo.")),c.default.createElement("div",{className:"ui tall stacked segment"},c.default.createElement("p",null,"Pellentesque habitant morbi tristique senectus et netus et malesuada fames ac turpis egestas. Vestibulum tortor quam, feugiat vitae, ultricies eget, tempor sit amet, ante. Donec eu libero sit amet quam egestas semper. Aenean ultricies mi vitae est. Mauris placerat eleifend leo.")),c.default.createElement("div",{className:"ui tall stacked segment"},c.default.createElement("p",null,"Pellentesque habitant morbi tristique senectus et netus et malesuada fames ac turpis egestas. Vestibulum tortor quam, feugiat vitae, ultricies eget, tempor sit amet, ante. Donec eu libero sit amet quam egestas semper. Aenean ultricies mi vitae est. Mauris placerat eleifend leo.")))}}]),t}(c.default.Component);t.default=u},525:function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var l=function(){function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}(),s=a(302),c=n(s),u=a(470),d=a(526),m=n(d),p=a(538),f=n(p),h=a(539),v=n(h),b=a(540),g=n(b),y=function(e){function t(e){return r(this,t),i(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e))}return o(t,e),l(t,[{key:"render",value:function(){return c.default.createElement("div",{className:"personal"},c.default.createElement("div",{className:"ui middle"},c.default.createElement("div",{className:"ui container grid"},c.default.createElement("div",{className:"four wide column"},c.default.createElement("div",{className:"ui secondary vertical pointing menu"},c.default.createElement(u.NavLink,{to:"/personal/profile",activeClassName:"active",className:"item"},"个人信息"),c.default.createElement(u.NavLink,{to:"/personal/sheets",activeClassName:"active",className:"item"},"我的歌单"),c.default.createElement(u.NavLink,{to:"/personal/subscription",activeClassName:"active",className:"item"},"我的订阅"),c.default.createElement(u.NavLink,{to:"/personal/friends",activeClassName:"active",className:"item"},"我的好友"))),c.default.createElement("div",{className:"twelve wide column"},c.default.createElement(u.Route,{path:this.props.match.path+"/profile",component:m.default}),c.default.createElement(u.Route,{path:this.props.match.path+"/sheets",component:f.default}),c.default.createElement(u.Route,{path:this.props.match.path+"/subscription",component:g.default}),c.default.createElement(u.Route,{path:this.props.match.path+"/friends",component:v.default})))))}}]),t}(c.default.Component);t.default=y},526:function(e,t,a){(function(e,n,r){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}function o(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function l(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function s(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function c(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var u=function(){function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}(),d=a(302),m=i(d),p=a(512),f=i(p),h=a(514),v=a(528),b=a(531),g=a(532),y=i(g);a(533),a(534);var E=function(t){function a(e){l(this,a);var t=s(this,(a.__proto__||Object.getPrototypeOf(a)).call(this,e));return t.receiveInputCover=t.receiveInputCover.bind(t),t.handleClick=t.handleClick.bind(t),t.props.eventEmitter.addListener("receive-input-cover",t.receiveInputCover),t.imgcut="",t.state={url:""},t}return c(a,t),u(a,[{key:"receiveInputCover",value:function(t){var a=URL.createObjectURL(t);e("#avatar-cropper-modal img").cropper("destroy"),this.setState({url:a})}},{key:"handleClick",value:function(){this.props.eventEmitter.emit("receive-img-cut",this.imgcut)}},{key:"componentDidUpdate",value:function(){var t=this;e("#avatar-cropper-modal img").cropper({aspectRatio:1,viewMode:1,crop:function(e){t.imgcut="x_"+(e.x<0?0:Math.floor(e.x))+","+("y_"+(e.y<0?0:Math.floor(e.y))+",")+("w_"+Math.floor(e.width)+",")+("h_"+Math.floor(e.height))}})}},{key:"render",value:function(){return m.default.createElement("div",{className:"ui small modal",id:"avatar-cropper-modal"},m.default.createElement("div",{className:"ui container"},m.default.createElement("div",{className:"avatar-wrapper"},m.default.createElement("img",{src:this.state.url,alt:""})),m.default.createElement("button",{className:"ui fluid button",onClick:this.handleClick},"确定")))}}]),a}(f.default),N=function(t){function a(e){l(this,a);var t=s(this,(a.__proto__||Object.getPrototypeOf(a)).call(this,e));return t.updateProgress=t.updateProgress.bind(t),t}return c(a,t),u(a,[{key:"componentDidMount",value:function(){e("#avatar-upload-modal .progress").progress({percent:0}),this.props.eventEmitter.addListener("update-progress",this.updateProgress)}},{key:"componentDidUpdate",value:function(){}},{key:"updateProgress",value:function(t){console.log(t),e("#avatar-upload-modal .progress").progress("set percent",t)}},{key:"render",value:function(){return m.default.createElement("div",{className:"ui small login modal",id:"avatar-upload-modal"},m.default.createElement("div",{className:"ui container"},m.default.createElement("div",{className:"ui progress"},m.default.createElement("div",{className:"bar"},m.default.createElement("div",{className:"progress"})),m.default.createElement("div",{className:"label"},"正在上传..."))))}}]),a}(f.default),w=function(e){function t(e){return l(this,t),s(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e))}return c(t,e),u(t,[{key:"render",value:function(){return this.props.disabled?m.default.createElement("button",{className:"ui button disabled",onClick:this.props.updateProfile},"更新"):m.default.createElement("button",{className:"ui primary button",onClick:this.props.updateProfile},"更新")}}]),t}(f.default),k=function(t){function a(e){l(this,a);var t=s(this,(a.__proto__||Object.getPrototypeOf(a)).call(this,e));return t.state={name:"",gender:"",mail:"",description:"",avatar:"/image/avatar.png",updateButtonDisabled:!0},t.avatarFile=null,t.eventEmitter=new n,t.receiveImgCut=t.receiveImgCut.bind(t),t.handleChange=t.handleChange.bind(t),t.loadUserProfile=t.loadUserProfile.bind(t),t.loadUserAvatar=t.loadUserAvatar.bind(t),t.updateProfile=t.updateProfile.bind(t),t.uploadAvatar=t.uploadAvatar.bind(t),t.openAvatarCropperModal=t.openAvatarCropperModal.bind(t),t.eventEmitter.addListener("receive-img-cut",t.receiveImgCut),t}return c(a,t),u(a,[{key:"componentDidMount",value:function(){var t=this;e(".profile .avatar .card .image").dimmer({on:"hover"}),e(".profile .form .ui.radio.checkbox").checkbox({onChecked:function(){t.setState(o({updateButtonDisabled:!1},e(this).attr("name"),e(this).val()))}}),this.loadUserProfile()}},{key:"handleChange",value:function(e){this.setState(o({updateButtonDisabled:!1},e.target.name,e.target.value))}},{key:"loadUserProfile",value:function(){var t=this,a=e("#token").val();r("/api/user/profile/get",{method:"GET",credentials:"same-origin",headers:{Authorization:a}}).then(t.checkStatus).then(t.parseJSON).then(function(e){t.setState({name:e.body.name,mail:e.body.mail,description:e.body.description,gender:e.body.gender}),t.loadUserAvatar(e.body.avatar)}).catch(function(e){console.error(e)})}},{key:"loadUserAvatar",value:function(e){var t=this;""!=e&&t.setState({avatar:(0,h.getURL)(e)})}},{key:"openAvatarCropperModal",value:function(t){e("#avatar-cropper-modal").modal({detachable:!1}).modal("show"),this.avatarFile=t.target.files[0],this.eventEmitter.emit("receive-input-cover",this.avatarFile)}},{key:"receiveImgCut",value:function(t){console.log(t),e("#avatar-cropper-modal").modal("hide"),this.uploadAvatar(this.avatarFile,t)}},{key:"uploadAvatar",value:function(t,a){console.log("upload avatar");var n=this,i=e("#token").val();e("#avatar-upload-modal").modal({closable:!1,detachable:!1}).modal("show"),(0,y.default)(regeneratorRuntime.mark(function e(){var o,l,s;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return o="avatar-"+(0,v.guid)(),e.next=3,(0,b.uploadToOss)(o,t,i,regeneratorRuntime.mark(function e(t){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:n.eventEmitter.emit("update-progress",100*t);case 1:case"end":return e.stop()}},e,this)}));case 3:return l=e.sent,e.next=6,r("/api/user/profile/update",{method:"PUT",credentials:"same-origin",headers:{Authorization:i},body:JSON.stringify({avatar:l.name+("?x-oss-process=image/crop,"+a)})}).then(n.checkStatus).then(n.parseJSON);case 6:return s=e.sent,e.abrupt("return",s);case 8:case"end":return e.stop()}},e,this)})).then(function(t){console.log(t),n.loadUserProfile(),e("#avatar-upload-modal").modal("hide")},function(e){console.error(e)})}},{key:"updateProfile",value:function(){var t=this,a=e("#token").val();r("/api/user/profile/update",{method:"PUT",credentials:"same-origin",headers:{Authorization:a},body:JSON.stringify({name:t.state.name,mail:t.state.mail,description:t.state.description,gender:t.state.gender})}).then(t.checkStatus).then(t.parseJSON).then(function(e){alert("更新成功"),t.setState({updateButtonDisabled:!0})}).catch(function(e){console.error(e)})}},{key:"render",value:function(){return m.default.createElement("div",{className:"profile"},m.default.createElement(E,{eventEmitter:this.eventEmitter}),m.default.createElement(N,{eventEmitter:this.eventEmitter}),m.default.createElement("div",{className:"ui medium header"},"公开信息"),m.default.createElement("div",{className:"ui divider"}),m.default.createElement("div",{className:"ui grid"},m.default.createElement("div",{className:"twelve wide column"},m.default.createElement("div",{className:"ui form"},m.default.createElement("div",{className:"field name"},m.default.createElement("label",null,"昵称 : "),m.default.createElement("div",{className:"ui input"},m.default.createElement("input",{type:"text",name:"name",value:this.state.name,onChange:this.handleChange}))),m.default.createElement("div",{className:"inline fields"},m.default.createElement("label",null,"性别: "),m.default.createElement("div",{className:"field"},m.default.createElement("div",{className:"ui radio checkbox"},m.default.createElement("input",{type:"radio",name:"gender",value:"male",checked:"male"===this.state.gender,className:"hidden"}),m.default.createElement("label",null,"男"))),m.default.createElement("div",{className:"field"},m.default.createElement("div",{className:"ui radio checkbox"},m.default.createElement("input",{type:"radio",name:"gender",value:"female",checked:"female"===this.state.gender,className:"hidden"}),m.default.createElement("label",null,"女")))),m.default.createElement("div",{className:"field mail"},m.default.createElement("label",null,"邮箱: "),m.default.createElement("div",{className:"input"},m.default.createElement("input",{type:"text",readOnly:"",name:"mail",value:this.state.mail}))),m.default.createElement("div",{className:"field description"},m.default.createElement("label",null,"简介: "),m.default.createElement("div",{className:"description"},m.default.createElement("textarea",{placeholder:"写点什么关于你自己",name:"description",value:this.state.description,onChange:this.handleChange}))),m.default.createElement(w,{disabled:this.state.updateButtonDisabled,updateProfile:this.updateProfile}))),m.default.createElement("div",{className:"four wide column"},m.default.createElement("div",{className:"avatar"},m.default.createElement("div",{className:"ui raised card"},m.default.createElement("div",{className:"blurring small dimmable image"},m.default.createElement("div",{className:"ui dimmer"},m.default.createElement("div",{className:"content"},m.default.createElement("div",{className:"center"},m.default.createElement("input",{type:"file",name:"avatar-file",id:"avatar-file",className:"avatar-file",onChange:this.openAvatarCropperModal}),m.default.createElement("label",{htmlFor:"avatar-file"},"更换头像")))),m.default.createElement("img",{src:this.state.avatar})))))))}}]),a}(f.default);t.default=k}).call(t,a(301),a(527),a(511))},528:function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function r(){function e(){return Math.floor(65536*(1+Math.random())).toString(16).substring(1)}return e()+e()+"-"+e()+"-"+e()+"-"+e()+"-"+e()+e()+e()}function i(e,t){return t?l.default.format(e,t):l.default.format(e,"YYYY-MM-DD")}Object.defineProperty(t,"__esModule",{value:!0}),t.openPlayer=t.dateformat=t.guid=void 0;var o=a(529),l=n(o),s=null,c=function(e){null==s||s.closed?s=window.open("/player","mushareplayer"):s.postMessage(JSON.stringify(e),"*")};t.guid=r,t.dateformat=i,t.openPlayer=c},531:function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function r(e,t,a,n){return(0,o.getOssClient)(a).then(function(a){return(0,s.default)(regeneratorRuntime.mark(function r(){var i,o,l;return regeneratorRuntime.wrap(function(r){for(;;)switch(r.prev=r.next){case 0:i=null,o=0;case 2:if(!(o<5)){r.next=17;break}return r.prev=3,r.next=6,a.multipartUpload(e,t,{checkpoint:i,progress:regeneratorRuntime.mark(function e(t,a){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:i=a,n&&n(t);case 2:case"end":return e.stop()}},e,this)})});case 6:return l=r.sent,console.log(l),r.abrupt("return",l);case 11:r.prev=11,r.t0=r.catch(3),console.log(r.t0);case 14:o++,r.next=2;break;case 17:throw new Error("Upload Failed");case 18:case"end":return r.stop()}},r,this,[[3,11]])}))})}function i(e,t,a,n){return(0,o.getOssClient)(a).then(function(a){return a.multipartUpload(e,t,{progress:n})})}Object.defineProperty(t,"__esModule",{value:!0}),t.uploadAudio=t.uploadToOss=void 0;var o=a(514),l=a(532),s=n(l);t.uploadToOss=i,t.uploadAudio=r},534:function(e,t,a){var n=a(535);"string"==typeof n&&(n=[[e.id,n,""]]);a(537)(n,{});n.locals&&(e.exports=n.locals)},535:function(e,t,a){t=e.exports=a(536)(),t.push([e.id,'/*!\n * Cropper v3.0.0-rc.1\n * https://github.com/fengyuanchen/cropper\n *\n * Copyright (c) 2017 Fengyuan Chen\n * Released under the MIT license\n *\n * Date: 2017-04-30T03:10:34.736Z\n */.cropper-container{font-size:0;line-height:0;position:relative;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;direction:ltr;-ms-touch-action:none;touch-action:none}.cropper-container img{display:block;min-width:0!important;max-width:none!important;min-height:0!important;max-height:none!important;width:100%;height:100%;image-orientation:0deg}.cropper-canvas,.cropper-crop-box,.cropper-drag-box,.cropper-modal,.cropper-wrap-box{position:absolute;top:0;right:0;bottom:0;left:0}.cropper-wrap-box{overflow:hidden}.cropper-drag-box{opacity:0;background-color:#fff}.cropper-modal{opacity:.5;background-color:#000}.cropper-view-box{display:block;overflow:hidden;width:100%;height:100%;outline:1px solid #39f;outline-color:rgba(51,153,255,.75)}.cropper-dashed{position:absolute;display:block;opacity:.5;border:0 dashed #eee}.cropper-dashed.dashed-h{top:33.33333%;left:0;width:100%;height:33.33333%;border-top-width:1px;border-bottom-width:1px}.cropper-dashed.dashed-v{top:0;left:33.33333%;width:33.33333%;height:100%;border-right-width:1px;border-left-width:1px}.cropper-center{position:absolute;top:50%;left:50%;display:block;width:0;height:0;opacity:.75}.cropper-center:after,.cropper-center:before{position:absolute;display:block;content:" ";background-color:#eee}.cropper-center:before{top:0;left:-3px;width:7px;height:1px}.cropper-center:after{top:-3px;left:0;width:1px;height:7px}.cropper-face,.cropper-line,.cropper-point{position:absolute;display:block;width:100%;height:100%;opacity:.1}.cropper-face{top:0;left:0;background-color:#fff}.cropper-line{background-color:#39f}.cropper-line.line-e{top:0;right:-3px;width:5px;cursor:e-resize}.cropper-line.line-n{top:-3px;left:0;height:5px;cursor:n-resize}.cropper-line.line-w{top:0;left:-3px;width:5px;cursor:w-resize}.cropper-line.line-s{bottom:-3px;left:0;height:5px;cursor:s-resize}.cropper-point{width:5px;height:5px;opacity:.75;background-color:#39f}.cropper-point.point-e{top:50%;right:-3px;margin-top:-3px;cursor:e-resize}.cropper-point.point-n{top:-3px;left:50%;margin-left:-3px;cursor:n-resize}.cropper-point.point-w{top:50%;left:-3px;margin-top:-3px;cursor:w-resize}.cropper-point.point-s{bottom:-3px;left:50%;margin-left:-3px;cursor:s-resize}.cropper-point.point-ne{top:-3px;right:-3px;cursor:ne-resize}.cropper-point.point-nw{top:-3px;left:-3px;cursor:nw-resize}.cropper-point.point-sw{bottom:-3px;left:-3px;cursor:sw-resize}.cropper-point.point-se{right:-3px;bottom:-3px;width:20px;height:20px;cursor:se-resize;opacity:1}@media (min-width:768px){.cropper-point.point-se{width:15px;height:15px}}@media (min-width:992px){.cropper-point.point-se{width:10px;height:10px}}@media (min-width:1200px){.cropper-point.point-se{width:5px;height:5px;opacity:.75}}.cropper-point.point-se:before{position:absolute;right:-50%;bottom:-50%;display:block;width:200%;height:200%;content:" ";opacity:0;background-color:#39f}.cropper-invisible{opacity:0}.cropper-bg{background-image:url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQAQMAAAAlPW0iAAAAA3NCSVQICAjb4U/gAAAABlBMVEXMzMz////TjRV2AAAACXBIWXMAAArrAAAK6wGCiw1aAAAAHHRFWHRTb2Z0d2FyZQBBZG9iZSBGaXJld29ya3MgQ1M26LyyjAAAABFJREFUCJlj+M/AgBVhF/0PAH6/D/HkDxOGAAAAAElFTkSuQmCC")}.cropper-hide{position:absolute;display:block;width:0;height:0}.cropper-hidden{display:none!important}.cropper-move{cursor:move}.cropper-crop{cursor:crosshair}.cropper-disabled .cropper-drag-box,.cropper-disabled .cropper-face,.cropper-disabled .cropper-line,.cropper-disabled .cropper-point{cursor:not-allowed}',""])},538:function(e,t,a){(function(e,n,r){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function l(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function s(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var c=function(){function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}(),u=a(302),d=i(u),m=a(512),p=i(m),f=a(513),h=i(f),v=a(528),b=a(531),g=a(514),y=a(532),E=i(y);a(533),a(534);var N=a(470),w=function(t){function a(e){o(this,a);var t=l(this,(a.__proto__||Object.getPrototypeOf(a)).call(this,e));return t.receiveInputCover=t.receiveInputCover.bind(t),t.handleClick=t.handleClick.bind(t),t.props.eventEmitter.addListener("receive-input-cover",t.receiveInputCover),t.imgcut="",t.state={url:""},t}return s(a,t),c(a,[{key:"receiveInputCover",value:function(t){var a=URL.createObjectURL(t);e("#sheet-cover-cropper-modal img").cropper("destroy"),this.setState({url:a})}},{key:"handleClick",value:function(){this.props.eventEmitter.emit("receive-img-cut",this.imgcut),e("#sheet-cover-cropper-modal").modal("hide")}},{key:"componentDidUpdate",value:function(){var t=this;e("#sheet-cover-cropper-modal img").cropper({aspectRatio:1,viewMode:1,crop:function(e){t.imgcut="x_"+(e.x<0?0:Math.floor(e.x))+","+("y_"+(e.y<0?0:Math.floor(e.y))+",")+("w_"+Math.floor(e.width)+",")+("h_"+Math.floor(e.height))}})}},{key:"render",value:function(){return d.default.createElement("div",{className:"ui small couple modal",id:"sheet-cover-cropper-modal"},d.default.createElement("div",{className:"ui container"},d.default.createElement("div",{className:"avatar-wrapper"},d.default.createElement("img",{src:this.state.url,alt:""})),d.default.createElement("button",{className:"ui fluid button",onClick:this.handleClick},"确定")))}}]),a}(p.default),k=function(t){function a(e){o(this,a);var t=l(this,(a.__proto__||Object.getPrototypeOf(a)).call(this,e));return t.sheet={name:"",privilege:"",coverFile:null},t.state={creating:!1},t.imgcut="",t.receiveImgCut=t.receiveImgCut.bind(t),t.createSheet=t.createSheet.bind(t),t.handleChange=t.handleChange.bind(t),t.props.eventEmitter.addListener("receive-img-cut",t.receiveImgCut),t}return s(a,t),c(a,[{key:"receiveImgCut",value:function(e){console.log(e),this.imgcut=e}},{key:"handleChange",value:function(t){"file"===t.target.type?(this.props.eventEmitter.emit("receive-input-cover",t.target.files[0]),e("#sheet-cover-cropper-modal").modal("show"),this.sheet.coverFile=t.target.files[0]):this.sheet[t.target.name]=t.target.value}},{key:"closeModal",value:function(){this.props.onSheetCreated(),e("#create-sheet-modal .form .name").val(""),e("#create-sheet-modal .form .sheet-cover-file").val(""),e("#create-sheet-modal .form .dropdown").dropdown("clear")}},{key:"createSheet",value:function(){var t=this;null!==this.sheet.coverFile&&(this.setState({creating:!0}),(0,E.default)(regeneratorRuntime.mark(function a(){var r,i,o,l;return regeneratorRuntime.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return r=e("#token").val(),i="sheetcover-"+(0,v.guid)(),a.next=4,(0,b.uploadToOss)(i,t.sheet.coverFile,r);case 4:return o=a.sent,console.log(o),a.next=8,n("/api/music/sheet/create",{method:"POST",credentials:"same-origin",headers:{Authorization:r},body:JSON.stringify({name:t.sheet.name,privilege:t.sheet.privilege,cover:o.name+("?x-oss-process=image/crop,"+t.imgcut)})}).then(t.checkStatus).then(t.parseJSON);case 8:return l=a.sent,a.abrupt("return",l);case 10:case"end":return a.stop()}},a,this)})).then(function(e){t.setState({creating:!1}),t.closeModal()},function(e){t.setState({creating:!1})}))}},{key:"componentDidMount",value:function(){var t=this;e("#create-sheet-modal .form .dropdown").dropdown({onChange:function(e){console.log(e),t.sheet.privilege=e}})}},{key:"render",value:function(){var e=null;return e=this.state.creating?d.default.createElement("button",{className:"ui fluid button",onClick:this.createSheet},d.default.createElement("i",{className:"spinner loading icon"}),"创建中..."):d.default.createElement("button",{className:"ui fluid button",onClick:this.createSheet},"创建"),d.default.createElement("div",{className:"ui small couple modal",id:"create-sheet-modal"},d.default.createElement("div",{className:"ui container"},d.default.createElement("div",{className:"ui items"},d.default.createElement("div",{className:"item"},d.default.createElement("div",{className:"ui image"},d.default.createElement("img",{src:h.default,alt:""})),d.default.createElement("div",{className:"middle aligned content"},d.default.createElement("h3",null,"创建歌单")))),d.default.createElement("div",{className:"ui form"},d.default.createElement("div",{className:"field"},d.default.createElement("label",null,"歌单名"),d.default.createElement("input",{type:"text",name:"name",className:"name",placeholder:"歌单名",onChange:this.handleChange})),d.default.createElement("div",{className:"field"},d.default.createElement("label",null,"权限"),d.default.createElement("select",{name:"privilege",className:"ui fluid dropdown"},d.default.createElement("option",{value:""},"选择权限"),d.default.createElement("option",{value:"public"},"对所有人公开"),d.default.createElement("option",{value:"friend"},"对好友公开"),d.default.createElement("option",{value:"private"},"私有"))),d.default.createElement("div",{className:"field"},d.default.createElement("input",{type:"file",name:"sheet-cover-file",id:"sheet-cover-file",className:"sheet-cover-file",onChange:this.handleChange}),d.default.createElement("label",{htmlFor:"sheet-cover-file"},"上传封面")),e)))}}]),a}(p.default),_=function(e){function t(e){return o(this,t),l(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e))}return s(t,e),c(t,[{key:"render",value:function(){var e=this.props.sheets.map(function(e){return d.default.createElement(N.Link,{to:"/sheet/"+e.id,className:"card","data-id":e.id},d.default.createElement("div",{className:"image"},d.default.createElement("img",{src:""===e.cover?"/image/avatar.png":(0,g.getURL)(e.cover)})),d.default.createElement("div",{className:"content"},d.default.createElement("div",{className:"description"},e.name)))});return d.default.createElement("div",{className:"ui four link cards"},e,d.default.createElement("div",{className:"card",onClick:this.props.openCreateSheetModal},d.default.createElement("div",{className:"ui content"},d.default.createElement("div",{className:"ui middle aligned grid"},d.default.createElement("div",{className:"row"},d.default.createElement("div",{className:"column"},d.default.createElement("i",{className:"huge plus icon"})))))))}}]),t}(p.default),O=function(t){function a(e){o(this,a);var t=l(this,(a.__proto__||Object.getPrototypeOf(a)).call(this,e));return t.state={privateSheet:[],publicSheet:[],friendSheet:[]},t.eventEmitter=new r,t.onSheetCreated=t.onSheetCreated.bind(t),t.openCreateSheetModal=t.openCreateSheetModal.bind(t),t}return s(a,t),
c(a,[{key:"openCreateSheetModal",value:function(){e("#create-sheet-modal").modal("show")}},{key:"onSheetCreated",value:function(){e("#create-sheet-modal").modal("hide"),this.loadSheet()}},{key:"loadSheet",value:function(){var t=this;n("/api/music/sheet/list",{method:"GET",credentials:"same-origin",headers:{Authorization:e("#token").val()}}).then(t.checkStatus).then(t.parseJSON).then(function(e){var a=e.body.sheets,n=a.filter(function(e){return"private"===e.privilege}),r=a.filter(function(e){return"public"===e.privilege}),i=a.filter(function(e){return"friend"===e.privilege});t.setState({privateSheet:n,publicSheet:r,friendSheet:i})}).catch(function(e){console.log(e)})}},{key:"componentDidMount",value:function(){this.loadSheet(),e(".sheets .couple.modal").modal({detachable:!1,allowMultiple:!0})}},{key:"render",value:function(){return d.default.createElement("div",{className:"sheets"},d.default.createElement(k,{eventEmitter:this.eventEmitter,onSheetCreated:this.onSheetCreated}),d.default.createElement(w,{eventEmitter:this.eventEmitter}),d.default.createElement("div",{className:"ui medium header"},"公开歌单"),d.default.createElement("div",{className:"ui divider"}),d.default.createElement("div",{className:"public-sheet"},d.default.createElement(_,{sheets:this.state.publicSheet,openCreateSheetModal:this.openCreateSheetModal,createSheet:this.createSheet})),d.default.createElement("div",{className:"ui medium header"},"对好友公开歌单"),d.default.createElement("div",{className:"ui divider"}),d.default.createElement("div",{className:"friend-sheet"},d.default.createElement(_,{sheets:this.state.friendSheet,openCreateSheetModal:this.openCreateSheetModal,createSheet:this.createSheet})),d.default.createElement("div",{className:"ui medium header"},"私有歌单"),d.default.createElement("div",{className:"ui divider"}),d.default.createElement("div",{className:"private-sheet"},d.default.createElement(_,{sheets:this.state.privateSheet,openCreateSheetModal:this.openCreateSheetModal,createSheet:this.createSheet})))}}]),a}(p.default);t.default=O}).call(t,a(301),a(511),a(527))},539:function(e,t,a){(function(e,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function l(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function s(e){return e.accept?d.default.createElement("div",{className:"ui button disabled","data-friend-id":e.id},"已接受"):d.default.createElement("div",{className:"ui button","data-friend-id":e.id,onClick:e.acceptFriendRequest},"接受")}Object.defineProperty(t,"__esModule",{value:!0});var c=function(){function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}(),u=a(302),d=r(u),m=a(512),p=r(m),f=a(514),h=a(470),v=function(e){function t(){return i(this,t),o(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return l(t,e),c(t,[{key:"render",value:function(){var e=this.props.friends.map(function(e){return d.default.createElement("div",{className:"item"},d.default.createElement("img",{className:"ui avatar image",src:""===e.avatar?"/image/avatar.png":(0,f.getURL)(e.avatar)}),d.default.createElement("div",{className:"content"},d.default.createElement(h.Link,{to:"/user/"+e.id,className:"header"},e.name)))});return d.default.createElement("div",{className:"ui middle aligned animated divided large list"},e)}}]),t}(p.default),b=function(e){function t(){return i(this,t),o(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return l(t,e),c(t,[{key:"render",value:function(){var e=this,t=this.props.friends.map(function(t){return d.default.createElement("div",{className:"item"},d.default.createElement("div",{className:"right floated content"},d.default.createElement(s,{id:t.id,accept:t.accept,acceptFriendRequest:e.props.acceptFriendRequest})),d.default.createElement("img",{className:"ui avatar image",src:""===t.avatar?"/image/avatar.png":(0,f.getURL)(t.avatar)}),d.default.createElement("div",{className:"content"},d.default.createElement(h.Link,{to:"/user/"+t.id,className:"header"},t.name)))});return d.default.createElement("div",{className:"ui middle aligned divided large list"},t)}}]),t}(p.default),g=function(t){function a(e){i(this,a);var t=o(this,(a.__proto__||Object.getPrototypeOf(a)).call(this,e));return t.state={friends:[],friendRequests:[]},t.acceptFriendRequest=t.acceptFriendRequest.bind(t),t}return l(a,t),c(a,[{key:"loadFriends",value:function(){var t=this;e("/api/user/friend/list",{method:"GET",credentials:"same-origin",headers:{Authorization:n("#token").val()}}).then(t.checkStatus).then(t.parseJSON).then(function(e){var a=e.body;t.setState({friends:a})}).catch(function(e){console.log(e)})}},{key:"loadFriendRequests",value:function(){var t=this;e("/api/user/friend/request",{method:"GET",credentials:"same-origin",headers:{Authorization:n("#token").val()}}).then(t.checkStatus).then(t.parseJSON).then(function(e){var a=e.body.map(function(e){return e.accept=!1,e});t.setState({friendRequests:a})}).catch(function(e){console.log(e)})}},{key:"acceptFriendRequest",value:function(t){var a=this,r=n(t.target).data("friendId");e("/api/user/friend/request",{method:"PUT",credentials:"same-origin",headers:{Authorization:n("#token").val()},body:JSON.stringify({friendId:r})}).then(a.checkStatus).then(a.parseJSON).then(function(){var e=a.state.friendRequests.map(function(e){return e.id==r&&(e.accept=!0),e});a.setState({friendRequests:e})}).catch(function(e){console.log(e)})}},{key:"componentDidMount",value:function(){this.loadFriends(),this.loadFriendRequests()}},{key:"render",value:function(){return d.default.createElement("div",{className:"friends"},d.default.createElement("div",{className:"ui medium header"},"好友请求"),d.default.createElement("div",{className:"ui divider"}),d.default.createElement("div",{className:"friends-list"},d.default.createElement(b,{friends:this.state.friendRequests,acceptFriendRequest:this.acceptFriendRequest})),d.default.createElement("div",{className:"ui medium header"},"好友列表"),d.default.createElement("div",{className:"ui divider"}),d.default.createElement("div",{className:"friends-list"},d.default.createElement(v,{friends:this.state.friends})))}}]),a}(p.default);t.default=g}).call(t,a(511),a(301))},540:function(e,t,a){(function(e,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function l(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var s=function(){function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}(),c=a(302),u=r(c),d=a(512),m=r(d),p=a(470),f=a(514),h=function(e){function t(e){return i(this,t),o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e))}return l(t,e),s(t,[{key:"render",value:function(){var e=this.props.sheets.map(function(e){return u.default.createElement(p.Link,{to:"/sheet/"+e.id,className:"card"},u.default.createElement("div",{className:"image"},u.default.createElement("img",{src:""===e.cover?"/image/avatar.png":(0,f.getURL)(e.cover)})),u.default.createElement("div",{className:"content"},u.default.createElement("div",{className:"description"},e.name)))});return u.default.createElement("div",{className:"ui four link cards"},e)}}]),t}(m.default),v=function(t){function a(e){i(this,a);var t=o(this,(a.__proto__||Object.getPrototypeOf(a)).call(this,e));return t.state={sheets:[]},t}return l(a,t),s(a,[{key:"loadSheet",value:function(){var t=this;e("/api/music/sheet/list/subscription",{method:"GET",credentials:"same-origin",headers:{Authorization:n("#token").val()}}).then(t.checkStatus).then(t.parseJSON).then(function(e){var a=e.body;console.log(a),t.setState({sheets:a})}).catch(function(e){console.log(e)})}},{key:"componentDidMount",value:function(){this.loadSheet()}},{key:"render",value:function(){return u.default.createElement("div",{className:"subscription"},u.default.createElement("div",{className:"ui medium header"},"歌单"),u.default.createElement("div",{className:"ui divider"}),u.default.createElement("div",{className:"subs-sheet"},u.default.createElement(h,{sheets:this.state.sheets})))}}]),a}(m.default);t.default=v}).call(t,a(511),a(301))},541:function(e,t,a){(function(e,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function l(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var s=function(){function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}(),c=a(302),u=r(c),d=a(512),m=r(d),p=a(514),f=a(528),h=a(470),v=a(513),b=r(v),g=a(532),y=r(g),E=a(531),N=function(e){function t(){return i(this,t),o(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return l(t,e),s(t,[{key:"render",value:function(){var e={backgroundImage:'url("'+this.props.sheetInfo.cover+'")'};return u.default.createElement("div",{className:"sheet-info"},u.default.createElement("div",{className:"bg",style:e}),u.default.createElement("div",{className:"ui container"},u.default.createElement("div",{className:"ui two column centered grid"},u.default.createElement("div",{className:"column"},u.default.createElement("div",{className:"ui items"},u.default.createElement("div",{className:"item"},u.default.createElement("div",{className:"ui middle raised cover aligned image"},u.default.createElement("img",{src:this.props.sheetInfo.cover,alt:""})),u.default.createElement("div",{className:"middle aligned content"},u.default.createElement("div",{className:"ui huge header sheetname"},this.props.sheetInfo.sheetName),u.default.createElement("div",{className:"meta"},u.default.createElement("img",{className:"ui avatar image",src:this.props.sheetInfo.creatorAvatar}),u.default.createElement(h.Link,{to:"/user/"+this.props.sheetInfo.userId,className:"username"},this.props.sheetInfo.creator),u.default.createElement("span",{className:"modify-date"},"上次修改日期：",this.props.sheetInfo.lastModified)))))))))}}]),t}(m.default),w=function(t){function a(e){i(this,a);var t=o(this,(a.__proto__||Object.getPrototypeOf(a)).call(this,e));return t.play=t.play.bind(t),t}return l(a,t),s(a,[{key:"timeConvert",value:function(e){var t,a;return t=Math.floor(e/60),t=t>=10?""+t:"0"+t,a=Math.floor(e%60),a=a>=10?""+a:"0"+a,t+":"+a}},{key:"play",value:function(t){var a=this,r=e("#token").val();n("/api/user/player/add",{method:"POST",credentials:"same-origin",headers:{Authorization:r},body:JSON.stringify({audioId:t.id})}).then(a.checkStatus).then(a.parseJSON).then(function(){console.log("add into play list");var e=[];e.push(t),(0,f.openPlayer)(e)}).catch(function(e){console.error(e)})}},{key:"render",value:function(){var e=null;this.props.owner&&(e=u.default.createElement("i",{className:"remove icon"}));var t=this,a=this.props.audioList.map(function(a,n){return u.default.createElement("tr",null,u.default.createElement("td",null,n+1),u.default.createElement("td",null,u.default.createElement("span",null,a.name)),u.default.createElement("td",null,u.default.createElement("span",{className:"operations"},u.default.createElement("i",{className:"play icon",onClick:function(){return t.play(a)}}),u.default.createElement("i",{className:"plus icon"}),e)),u.default.createElement("td",null,a.artist),u.default.createElement("td",null,t.timeConvert(a.duration)))});return u.default.createElement("table",{className:"ui striped table"},u.default.createElement("thead",null,u.default.createElement("tr",null,u.default.createElement("th",null),u.default.createElement("th",null,"音乐标题"),u.default.createElement("th",null),u.default.createElement("th",null,"歌手"),u.default.createElement("th",null,"时长"))),u.default.createElement("tbody",null,a))}}]),a}(m.default),k=function(t){function a(e){i(this,a);var t=o(this,(a.__proto__||Object.getPrototypeOf(a)).call(this,e));return t.state={filename:"",uploading:!1,progress:0,artists:[]},t.audio={name:"",artist:"",audioFile:null,duration:0},t.loadArtists=t.loadArtists.bind(t),t.handleChange=t.handleChange.bind(t),t.uploadAudio=t.uploadAudio.bind(t),t.clear=t.clear.bind(t),t}return l(a,t),s(a,[{key:"clear",value:function(){this.audio={name:"",audioFile:null,duration:0},this.setState({filename:"",uploading:!1,progress:0}),e("#upload-audio-modal .form .audio-name").val(""),e("#upload-audio-modal .form .audio-file").val("")}},{key:"loadArtists",value:function(){var t=this;n("/api/music/artist/get",{method:"GET",credentials:"same-origin",headers:{Authorization:e("#token").val()}}).then(t.checkStatus).then(t.parseJSON).then(function(e){t.setState({artists:e.body})}).catch(function(e){console.error(e)})}},{key:"uploadAudio",value:function(){var t=this,a=e("#token").val();return null===t.audio.audioFile||""===t.audio.name||t.audio.artistId===-1||0===t.audio.duration?void alert("some file is empty"):(this.setState({uploading:!0}),void(0,y.default)(regeneratorRuntime.mark(function e(){var r,i,o;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,n("/api/music/artist/add",{method:"POST",credentials:"same-origin",headers:{Authorization:a},body:JSON.stringify({name:t.audio.artist.toString()})}).then(t.checkStatus).then(t.parseJSON);case 3:return r=e.sent,e.next=6,(0,E.uploadAudio)("audio-"+(0,f.guid)(),t.audio.audioFile,a,function(e){t.setState({progress:parseInt(100*e)})});case 6:return i=e.sent,e.next=9,n("/api/music/audio/add",{method:"POST",credentials:"same-origin",headers:{Authorization:a},body:JSON.stringify({name:t.audio.name,artistId:null===r?parseInt(t.audio.artistId):r.body.id,audioUrl:i.name,sheetId:parseInt(t.props.sheetId),duration:t.audio.duration})}).then(t.checkStatus).then(t.parseJSON);case 9:return o=e.sent,e.abrupt("return",o);case 13:throw e.prev=13,e.t0=e.catch(0),e.t0;case 16:case"end":return e.stop()}},e,this,[[0,13]])})).then(function(a){e("#upload-audio-modal").modal("hide"),t.clear(),t.props.loadSheet()},function(a){console.log(a),e("#upload-audio-modal").modal("hide"),alert("上传失败"),t.clear()}))}},{key:"getAudioDuration",value:function(e,t){var a=URL.createObjectURL(e),n=new Audio(a);n.onloadedmetadata=function(){console.log("onloadedmetadata"),t(parseInt(n.duration))},n.onerror=function(){console.log("not audio file"),t()}}},{key:"handleChange",value:function(e){var t=this;if("audio-file"===e.target.name){var a=e.target.files[0];this.getAudioDuration(e.target.files[0],function(e){e?(t.audio.audioFile=a,t.audio.duration=e,t.setState({filename:a.name})):alert("Not Audio File")})}else"audio-name"===e.target.name&&(this.audio.name=e.target.value)}},{key:"componentDidMount",value:function(){var t=this;e("#upload-audio-modal .form .dropdown").dropdown({allowAdditions:!0,onChange:function(e,a){console.log(a),t.audio.artist=a}}),this.loadArtists()}},{key:"componentDidUpdate",value:function(){}},{key:"render",value:function(){var e=this.state.artists.map(function(e){return u.default.createElement("option",{value:e.id},e.name)}),t=null;return t=this.state.uploading?u.default.createElement("button",{className:"ui fluid button",onClick:this.uploadAudio},u.default.createElement("i",{className:"spinner loading icon"}),"上传中...",u.default.createElement("span",null,this.state.progress+"%")):u.default.createElement("button",{className:"ui fluid button",onClick:this.uploadAudio},"上传"),u.default.createElement("div",{className:"ui small modal",id:"upload-audio-modal"},u.default.createElement("div",{className:"ui container"},u.default.createElement("div",{className:"ui items"},u.default.createElement("div",{className:"item"},u.default.createElement("div",{className:"ui image"},u.default.createElement("img",{src:b.default,alt:""})),u.default.createElement("div",{className:"middle aligned content"},u.default.createElement("h3",null,"上传歌曲")))),u.default.createElement("div",{className:"ui form"},u.default.createElement("div",{className:"field"},u.default.createElement("label",null,"歌单名"),u.default.createElement("input",{type:"text",name:"audio-name",className:"audio-name",placeholder:"歌曲名",onChange:this.handleChange})),u.default.createElement("div",{className:"field"},u.default.createElement("label",null,"歌手"),u.default.createElement("select",{name:"privilege",className:"ui fluid search dropdown"},u.default.createElement("option",{value:""},"选择歌手"),e)),u.default.createElement("div",{className:"field"},u.default.createElement("input",{type:"file",name:"audio-file",id:"audio-file",className:"audio-file",onChange:this.handleChange}),u.default.createElement("label",{htmlFor:"audio-file"},"歌曲文件"),u.default.createElement("p",null,this.state.filename)),t)))}}]),a}(m.default),_=function(t){function a(e){i(this,a);var t=o(this,(a.__proto__||Object.getPrototypeOf(a)).call(this,e));return t.state={owner:t.props.owner,subscribed:t.props.subscribed},t.subscribe=t.subscribe.bind(t),t.openUploadAudioModal=t.openUploadAudioModal.bind(t),t}return l(a,t),s(a,[{key:"openUploadAudioModal",value:function(){e("#upload-audio-modal").modal({detachable:!1}).modal("show")}},{key:"subscribe",value:function(){var t=e("#token").val(),a=this;n("/api/music/sheet/subscribe",{method:"POST",credentials:"same-origin",headers:{Authorization:t},body:JSON.stringify({toId:parseInt(this.props.sheetId)})}).then(a.checkStatus).then(a.parseJSON).then(function(){alert("订阅成功"),a.setState({subscribed:!0})}).catch(function(e){alert("订阅失败"),console.error(e)})}},{key:"componentWillReceiveProps",value:function(e){this.setState({owner:e.owner,subscribed:e.subscribed})}},{key:"render",value:function(){var e=null;return this.state.owner&&!this.state.subscribed?e=u.default.createElement("button",{className:"ui primary button",onClick:this.openUploadAudioModal},"上传歌曲"):!this.state.owner&&this.state.subscribed?e=u.default.createElement("button",{className:"ui disabled button"},"已订阅"):this.state.owner||this.state.subscribed||(e=u.default.createElement("button",{className:"ui primary button",onClick:this.subscribe},"订阅歌单")),u.default.createElement("div",{className:"audio-content ui container"},u.default.createElement("div",{className:"ui divider"}),u.default.createElement("div",{className:"ui top attached tabular menu"},u.default.createElement("a",{className:"item active","data-tab":"audioList"},"歌曲列表"),u.default.createElement("a",{className:"item","data-tab":"comments"},"评论")),u.default.createElement("div",{className:"ui bottom active attached tab segment audio-list","data-tab":"audioList"},u.default.createElement(k,{loadSheet:this.props.loadSheet,sheetId:this.props.sheetId}),e,u.default.createElement(w,{owner:this.props.owner,audioList:this.props.audioList})),u.default.createElement("div",{className:"ui bottom attached tab segment","data-tab":"comments"}))}}]),a}(m.default),O=function(t){function a(e){i(this,a);var t=o(this,(a.__proto__||Object.getPrototypeOf(a)).call(this,e));return t.state={sheetInfo:{sheetName:"",creator:"",creatorAvatar:"",lastModified:"",cover:"/image/avatar.png"},audioList:[],owner:!0,subscribed:!0},t.loadSheet=t.loadSheet.bind(t),t}return l(a,t),s(a,[{key:"loadSheet",value:function(){var t=this,a=this.props.match.params.sheetId,r="/api/music/audio/list?sheetId="+a;n(r,{method:"GET",credentials:"same-origin",headers:{Authorization:e("#token").val()}}).then(t.checkStatus).then(t.parseJSON).then(function(e){var a={userId:e.body.user.id,sheetName:e.body.name,cover:""===e.body.cover?"/image/avatar.png":(0,p.getURL)(e.body.cover),creator:e.body.user.name,creatorAvatar:""===e.body.user.avatar?"/image/avatar.png":(0,p.getURL)(e.body.user.avatar),lastModified:(0,f.dateformat)(1e3*e.body.update_at)},n=e.body.audio.map(function(t){return{id:t.id,name:t.name,audioUrl:t.audioUrl,artist:t.artist.name,duration:t.duration,sheet:e.body.name,cover:e.body.cover}});t.setState({sheetInfo:a,audioList:n,owner:e.body.owner,subscribed:e.body.subscribed})}).catch(function(e){console.error(e)})}},{key:"componentDidMount",value:function(){e(".sheet-page .audio-list .menu .item").tab(),this.loadSheet()}},{key:"render",value:function(){return u.default.createElement("div",{className:"sheet-page"},u.default.createElement(N,{sheetInfo:this.state.sheetInfo}),u.default.createElement(_,{loadSheet:this.loadSheet,audioList:this.state.audioList,sheetId:this.props.match.params.sheetId,owner:this.state.owner,subscribed:this.state.subscribed}))}}]),a}(m.default);t.default=O}).call(t,a(301),a(511))},542:function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var l=function(){function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}(),s=a(302),c=n(s);a(515);var u=function(e){function t(e){return r(this,t),i(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e))}return o(t,e),l(t,[{key:"componentDidMount",value:function(){}},{key:"render",value:function(){return c.default.createElement("div",{className:"ui very wide sidebar chat",id:"chat"},c.default.createElement("div",{className:"content"}))}}]),t}(c.default.Component);t.default=u},543:function(e,t,a){(function(e,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function l(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var s=function(){function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}(),c=a(302),u=r(c),d=a(512),m=r(d),p=a(514),f=a(470),h=(a(528),a(513)),v=(r(h),a(532)),b=(r(v),function(t){function a(e){i(this,a);var t=o(this,(a.__proto__||Object.getPrototypeOf(a)).call(this,e));return t.requestFriend=t.requestFriend.bind(t),t.state={friend:-1},t}return l(a,t),s(a,[{key:"requestFriend",value:function(){var t=this;e("/api/user/friend/request",{method:"POST",credentials:"same-origin",headers:{Authorization:n("#token").val(),"Content-Type":"application/json"},body:JSON.stringify({friendId:t.props.info.id})}).then(t.checkStatus).then(t.parseJSON).then(function(e){t.setState({friend:3})}).catch(function(e){console.log(e)})}},{key:"componentWillReceiveProps",value:function(e){this.setState({friend:e.info.friend})}},{key:"render",value:function(){var e=null;return 2===this.state.friend?e=u.default.createElement("div",{className:"ui primary button",onClick:this.requestFriend},"添加好友"):3===this.state.friend?e=u.default.createElement("div",{className:"ui button disabled"},"好友请求中"):4===this.state.friend&&(e=u.default.createElement("div",{className:"ui button disabled"},"已是好友")),u.default.createElement("div",{className:"info"},u.default.createElement("div",{className:"ui container"},u.default.createElement("div",{className:"avatar"},u.default.createElement("img",{className:"ui medium circular image",src:""===this.props.info.avatar?"/image/avatar.png":(0,p.getURL)(this.props.info.avatar)})),u.default.createElement("div",{className:"name"},this.props.info.name),u.default.createElement("div",{className:"ui divider"}),u.default.createElement("div",{className:"description"},this.props.info.description),u.default.createElement("div",{className:"friend"},e)))}}]),a}(m.default)),g=function(e){function t(){return i(this,t),o(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return l(t,e),s(t,[{key:"render",value:function(){var e=this.props.publicSheets.map(function(e){return u.default.createElement(f.Link,{to:"/sheet/"+e.id,className:"card","data-id":e.id},u.default.createElement("div",{className:"image"},u.default.createElement("img",{src:""===e.cover?"/image/avatar.png":(0,p.getURL)(e.cover)})),u.default.createElement("div",{className:"content"},u.default.createElement("div",{className:"description"},e.name)))}),t=this.props.privateSheets.map(function(e){return u.default.createElement(f.Link,{to:"/sheet/"+e.id,className:"card","data-id":e.id},u.default.createElement("div",{className:"image"},u.default.createElement("img",{src:""===e.cover?"/image/avatar.png":(0,p.getURL)(e.cover)})),u.default.createElement("div",{className:"content"},u.default.createElement("div",{className:"description"},e.name)))}),a=this.props.friendSheets.map(function(e){return u.default.createElement(f.Link,{to:"/sheet/"+e.id,className:"card","data-id":e.id},u.default.createElement("div",{className:"image"},u.default.createElement("img",{src:""===e.cover?"/image/avatar.png":(0,p.getURL)(e.cover)})),u.default.createElement("div",{className:"content"},u.default.createElement("div",{className:"description"},e.name)))}),n=null,r=null,i=null;return e.length>0&&(n=u.default.createElement("div",null,u.default.createElement("div",{className:"ui medium header"},"公开歌单"),u.default.createElement("div",{className:"ui divider"}))),a.length>0&&(r=u.default.createElement("div",null,u.default.createElement("div",{className:"ui medium header"},"对好友公开歌单"),u.default.createElement("div",{className:"ui divider"}))),t.length>0&&(i=u.default.createElement("div",null,u.default.createElement("div",{className:"ui medium header"},"私有歌单"),u.default.createElement("div",{className:"ui divider"}))),u.default.createElement("div",{className:"sheets"},n,u.default.createElement("div",{className:"ui four link cards public-sheet"},e),r,u.default.createElement("div",{className:"ui four link cards friend-sheet"},a),i,u.default.createElement("div",{className:"ui four link cards private-sheet"},t))}}]),t}(m.default),y=function(t){function a(e){i(this,a);var t=o(this,(a.__proto__||Object.getPrototypeOf(a)).call(this,e));return t.state={info:{avatar:"",name:"",description:"",friend:-1},publicSheets:[],friendSheets:[],privateSheets:[]},t.loadUserInfo=t.loadUserInfo.bind(t),t}return l(a,t),s(a,[{key:"loadUserInfo",value:function(){var t=this,a=this.props.match.params.userId;e("/api/music/sheet/list?toId="+a,{method:"GET",credentials:"same-origin",headers:{Authorization:n("#token").val()}}).then(t.checkStatus).then(t.parseJSON).then(function(e){console.log(e);var a={id:e.body.id,friend:e.body.friend,avatar:e.body.avatar,name:e.body.name,description:e.body.description},n=e.body.sheets.filter(function(e){return"public"===e.privilege}),r=e.body.sheets.filter(function(e){return"friend"===e.privilege}),i=e.body.sheets.filter(function(e){return"private"===e.privilege});t.setState({info:a,publicSheets:n,friendSheets:r,privateSheets:i})}).catch(function(e){console.error(e)})}},{key:"componentDidMount",value:function(){this.loadUserInfo()}},{key:"render",value:function(){return u.default.createElement("div",{className:"user"},u.default.createElement("div",{className:"ui container"},u.default.createElement("div",{className:"ui grid"},u.default.createElement("div",{className:"four wide column"},u.default.createElement(b,{info:this.state.info})),u.default.createElement("div",{className:"twelve wide column"},u.default.createElement(g,{publicSheets:this.state.publicSheets,friendSheets:this.state.friendSheets,privateSheets:this.state.privateSheets})))))}}]),a}(m.default);t.default=y}).call(t,a(511),a(301))},544:function(e,t,a){var n=a(545);"string"==typeof n&&(n=[[e.id,n,""]]);a(537)(n,{});n.locals&&(e.exports=n.locals)},545:function(e,t,a){t=e.exports=a(536)(),t.push([e.id,'#chat.ui[class*="very wide"].left.sidebar,#chat.ui[class*="very wide"].right.sidebar{width:600px}#chat .content{width:100%;height:100%;background-color:#6495ed}#avatar-upload-modal .container{width:80%;padding:2em}.pusher{position:relative;margin:0;padding-bottom:15rem;min-height:100%}#app .column,#app .grid{padding:0;margin:0}#app .header a{color:#000}#app .header .icon{margin:0}#app .header .segment{box-shadow:none;border:none}#app .header .header-top .logo{margin:0 auto}#app .header .header-top .item{padding-top:.1em;padding-bottom:.1em}#app .header .header-top .icon-home,#app .header .header-top .icon-user{border-color:#e6e6e6;border-style:solid;border-width:0 1px;border-radius:0}#app .header .header-top .icon-home i:hover,#app .header .header-top .icon-user .dropdown:hover{color:#535353}#app .header .header-top .dropdown .menu{z-index:200}#app .header .divider{border-width:1px;margin:0}#app .header .navigation{border-bottom-color:#e6e6e6;border-bottom-width:1px;border-bottom-style:solid}#app .header .navigation .menu{box-shadow:none;border-top:none;border-bottom:none;border-radius:0}#app .header .navigation .item a{color:#181818;font-weight:500}#app .home .carousel{background-color:#2a2a2a}#app .home .exhibition_hall{text-align:center;position:relative;overflow:hidden}#app .home .exhibition_hall h4{font-size:30px;text-align:center;margin:0 auto;padding-top:50px;color:#000}#app .home .tline{color:#dedede}#app .home .roundabout_box img{width:100%}#app .home .roundabout_box{height:430px;width:100%;margin:0 auto 20px}#app .home .roundabout-holder{list-style:none;width:500px;height:425px;margin:0 auto}#app .home .roundabout-moveable-item{font-size:12px!important;height:425px;width:650px;cursor:pointer;background:#f9f9f9}#app .home .roundabout-moveable-item img{height:100%;width:100%;background-color:#fff;margin:0}#app .home .roundabout-in-focus{cursor:auto}#app .home .roundabout-in-focus000:hover{-webkit-box-shadow:0 0 20px #787878;-moz-box-shadow:0 0 20px #787878;background:#f9f9f9}#app .home .roundabout-holder .text{color:#999}#app .home .roundabout-in-focus000:hover span{display:inline;position:absolute;bottom:5px;right:5px;padding:8px 20px;background:#f9f9f9;color:#36c;z-index:999;-webkit-border-top-left-radius:5px;-moz-border-radius-topLeft:5px;border-left:1px solid #aaa;border-top:1px solid #aaa}#app .home .roundabout a:active,#app .home .roundabout a:focus,#app .home .roundabout a:visited{outline:none;text-decoration:none}#app .home .roundabout li{margin:0}#app .home .container{padding:1em 6em}#app .home .hot .cards,#app .home .hot .header,#app .home .original .cards,#app .home .original .header,#app .home .recommend .cards,#app .home .recommend .header{padding:0 2em}#app .home .hot .cards .description,#app .home .original .cards .description,#app .home .recommend .cards .description{font-size:15px;color:#0a0a0a;text-align:center}#app .hot .container{padding:1em 5em}#app .hot .header{padding:0 1em}#app .hot .cards{padding:0 2em}#app .hot .cards .description{white-space:nowrap;overflow:hidden;text-overflow:ellipsis;font-size:15px;color:#0a0a0a;text-align:center}#app .recommend .container{padding:1em 5em}#app .recommend .header{padding:0 1em}#app .recommend .cards{padding:0 2em}#app .recommend .cards .description{white-space:nowrap;overflow:hidden;text-overflow:ellipsis;font-size:15px;color:#0a0a0a;text-align:center}#app .original .container{padding:1em 5em}#app .original .header{padding:0 1em}#app .original .cards{padding:0 2em}#app .original .cards .description{white-space:nowrap;overflow:hidden;text-overflow:ellipsis;font-size:15px;color:#0a0a0a;text-align:center}#app .community .container{padding:1em 2em}#app .sheet-page .bg{content:"";display:block;position:absolute;width:100%;height:100%;left:0;top:0;background-size:cover;background-position:50%;z-index:-2;filter:blur(10px) brightness(.45);-webkit-transform:scale(1.07)}#app .sheet-page .container{padding:1em 2em}#app .sheet-page .sheet-info{position:relative;overflow:hidden}#app .sheet-page .sheet-info .cover{box-shadow:0 0 0 1px #d4d4d5,0 2px 4px 0 rgba(34,36,38,.12),0 2px 10px 0 rgba(34,36,38,.15);width:220px;padding:2px}#app .sheet-page .sheet-info .item .content .sheetname{word-wrap:break-word;color:#f5f5f5;font-size:3em}#app .sheet-page .sheet-info .item .content .modify-date{color:#f5f5f5;font-size:13px;margin-left:5px}#app .sheet-page .sheet-info .item .content .username{color:#f5f5f5;font-size:15px;font-weight:700;margin:5px}#app .sheet-page .audio-content #upload-audio-modal .container{width:80%;padding:2em}#app .sheet-page .audio-content #upload-audio-modal .audio-file{width:.1px;height:.1px;opacity:0;overflow:hidden;position:absolute;z-index:-1}#app .sheet-page .audio-content #upload-audio-modal .audio-file+label{cursor:pointer;font-size:13px;font-weight:400;color:#fff;padding:.625rem 1.25rem;background-color:#000;display:inline-block}#app .sheet-page .audio-content #upload-audio-modal .audio-file+label:hover,#app .sheet-page .audio-content #upload-audio-modal .audio-file:focus+label{background-color:red}#app .sheet-page .audio-content .audio-list table .operations i{cursor:pointer;margin-left:10px;margin-right:10px}#app .sheet-page .audio-content .audio-list table .operations .play{font-size:14px}#app .sheet-page .audio-content .audio-list table .operations .plus,#app .sheet-page .audio-content .audio-list table .operations .remove{font-size:15px}#app .personal .container{padding:1em 2em}#app .personal .profile #avatar-cropper-modal .avatar-wrapper{height:364px;width:100%;margin-top:15px;margin-bottom:15px;box-shadow:inset 0 0 5px rgba(0,0,0,.25);background-color:#fcfcfc;overflow:hidden}#app .personal .profile #avatar-cropper-modal .avatar-wrapper img{display:block;height:auto;max-width:100%}#app .personal .profile .form{padding:0 6em 0 0}#app .personal .profile .avatar .avatar-file{width:.1px;height:.1px;opacity:0;overflow:hidden;position:absolute;z-index:-1}#app .personal .profile .avatar .avatar-file+label{cursor:pointer;font-size:18px;font-weight:500;color:#fff;padding:.625rem 1.25rem;background-color:#000;display:inline-block}#app .personal .profile .avatar .avatar-file+label:hover,#app .personal .profile .avatar .avatar-file:focus+label{background-color:red}#app .personal .sheets #sheet-cover-cropper-modal .avatar-wrapper{height:364px;width:100%;margin-top:15px;margin-bottom:15px;box-shadow:inset 0 0 5px rgba(0,0,0,.25);background-color:#fcfcfc;overflow:hidden}#app .personal .sheets #sheet-cover-cropper-modal .avatar-wrapper img{display:block;height:auto;max-width:100%}#app .personal .sheets #create-sheet-modal .container{width:80%;padding:2em}#app .personal .sheets #create-sheet-modal .sheet-cover-file{width:.1px;height:.1px;opacity:0;overflow:hidden;position:absolute;z-index:-1}#app .personal .sheets #create-sheet-modal .sheet-cover-file+label{cursor:pointer;font-size:13px;font-weight:400;color:#fff;padding:.625rem 1.25rem;background-color:#000;display:inline-block}#app .personal .sheets #create-sheet-modal .sheet-cover-file+label:hover,#app .personal .sheets #create-sheet-modal .sheet-cover-file:focus+label{background-color:red}#app .personal .sheets .friend-sheet,#app .personal .sheets .private-sheet,#app .personal .sheets .public-sheet{padding:0 6em 2em 0}#app .personal .sheets .friend-sheet .content .description,#app .personal .sheets .private-sheet .content .description,#app .personal .sheets .public-sheet .content .description{white-space:nowrap;overflow:hidden;text-overflow:ellipsis;text-align:center}#app .personal .sheets .friend-sheet .cards:last-child .content,#app .personal .sheets .friend-sheet .cards:last-child .content .grid,#app .personal .sheets .private-sheet .cards:last-child .content,#app .personal .sheets .private-sheet .cards:last-child .content .grid,#app .personal .sheets .public-sheet .cards:last-child .content,#app .personal .sheets .public-sheet .cards:last-child .content .grid{height:100%}#app .personal .sheets .friend-sheet .cards:last-child .content .grid .column,#app .personal .sheets .private-sheet .cards:last-child .content .grid .column,#app .personal .sheets .public-sheet .cards:last-child .content .grid .column{text-align:center}#app .personal .subscription .subs-sheet{padding:0 6em 2em 0}#app .personal .subscription .subs-sheet .content .description{white-space:nowrap;overflow:hidden;text-overflow:ellipsis;text-align:center}#app .personal .friends .friends-list{padding:0 12em 2em 0}#app .user .container{padding:1em 2em}#app .user .info{padding-top:2em}#app .user .info .name{padding:1em;font-size:20px;font-weight:500}#app .user .info .description{padding:.5em 1em}#app .user .info .friend{padding-top:1em;padding-bottom:1em}#app .user .info .friend .button{display:block}#app .user .sheets{padding:0 4em}#app .user .sheets .ui.header:first-child{margin-top:2em}#app .user .sheets .friend-sheet .content .description,#app .user .sheets .private-sheet .content .description,#app .user .sheets .public-sheet .content .description{white-space:nowrap;overflow:hidden;text-overflow:ellipsis;text-align:center}#app .footer{position:absolute;right:0;bottom:0;left:0}#app .footer .column{padding:0 2em}#app .footer.segment{padding:3em 0}',""]);
}});
//# sourceMappingURL=app.js.map